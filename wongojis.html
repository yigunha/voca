<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>원고지</title>
    <link rel="stylesheet" href="wongoji/style.css">
</head>
<body>
    <div class="container">
        <div class="setup-area">
            <label for="classSelect">반:</label>
            <select id="classSelect">
                <option value="3A">3A</option>
                <option value="3B">3B</option>
                <option value="4A">4A</option>
                <option value="4B">4B</option>
            </select>
            <label for="studentName">학생 이름:</label>
            <input type="text" id="studentName" placeholder="이름을 입력하세요">
            <label for="studentPassword">비밀번호:</label>
            <input type="password" id="studentPassword" placeholder="비밀번호 4자리">
            <label for="colsSelect">칸 수:</label>
            <select id="colsSelect">
                <option value="20">20칸 (400자)</option>
                <option value="25-300">25칸 (300자)</option>
                <option value="25-700">25칸 (700자)</option>
            </select>
            <button id="startBtn">시작</button>
        </div>
        
        <div id="workArea" class="work-area">
            <div class="manuscript-memo-container">
                <div class="manuscript-center">
                    <div class="manuscript-wrapper">
                        <div class="error-line-container">
                            <svg id="errorLineSvg" class="error-line-svg"></svg>
                        </div>
                        <div id="manuscriptPaper" class="manuscript-paper cols-20"></div>
                    </div>
                </div>
                
                <div id="memoSidePanel" class="memo-side-panel" style="display:none;">
                    <div class="memo-panel-header">
                        <h3>📝 선생님 메모</h3>
                    </div>
                    <div id="memoSideContent" class="memo-side-content"></div>
                </div>
            </div>
            
            <div class="action-buttons">
                <button class="supabase-save-btn" onclick="saveToSupabase()">서버에 저장</button>
                <button class="supabase-load-btn" onclick="loadFromSupabase()">서버에서 불러오기</button>
                <button class="file-save-btn" onclick="saveToFile()">파일로 저장</button>
                <button class="file-load-btn" onclick="loadFromFile()">파일에서 불러오기</button>
                <button class="logout-btn" onclick="logout()">로그아웃</button>
            </div>
        </div>
    </div>
    
    <div id="saveModal" class="modal">
        <div class="modal-content save-modal-content">
            <div class="save-modal-left">
                <h3>저장된 파일</h3>
                <ul id="existingFilesList" class="existing-files-list"></ul>
            </div>
            <div class="save-modal-right">
                <h2>원고 저장</h2>
                <input type="text" id="saveTitle" placeholder="제목을 입력하세요 (예: 첫번째 작문)">
                <div class="btn-group">
                    <button class="confirm-btn" onclick="confirmSave()">저장</button>
                    <button class="cancel-btn" onclick="closeSaveModal()">취소</button>
                </div>
            </div>
        </div>
    </div>
    
    <div id="loadModal" class="modal">
        <div class="modal-content">
            <h2>저장된 원고 목록</h2>
            <ul id="savedList" class="saved-list"></ul>
            <div class="btn-group">
                <button class="cancel-btn" onclick="closeLoadModal()">닫기</button>
            </div>
        </div>
    </div>
    
    <!-- JS 파일들 -->
    <script src="wongoji/1_config.js"></script>
    <script src="wongoji/3_manuscript_correct.js"></script>
    
    <!-- WASM 모듈을 사용하는 JS -->
    <script type="module" src="wongoji/4_input_correct.js"></script>
    <script type="module" src="wongoji/5_storage_wasm.js"></script>
</body>
</html>